# 인터럽트에서 DirectX까지


- Interrupt 란?
  - 프로그램을 실행하는 도중에 얘기지 않은 상황이 발생할 경우 현재 실행중인 작업을 중단하고 발생된 상황을 처리 한 후 다시 실행중인 작업으로 복귀하는 것.

- 외부 인터럽트
  - 입출력 인터럽트(I/O Interrupt)
    - 입출력장치가 데이터 전송을 요구하거나 전송이 끝나 다음 동작이 수행되어야 할 경우
    - 입출력 데이터에 이상이 있는 경우

- 예전에는 CPU와 RAM이 직접 관리 했다. 하지만 현재는 간접적으로 RAM과 I/O 하는데 `메모리 매니저`(브릿지 칩셋 역할)라는 놈이 CPU와 RAM사이에서 관리해준다.
- 이때 I/O Interrupt 가 발생한다고 한다.
  

- Interrupt 동작 순서

1. 인터럽트 요청
2. 프로그램 실행 중단 : 현재 실행중이던 Micro Opertaion 까지 수행한다.
3. 현재의 프로그램 상태 보존 : PCB(Process Control Block), PC(Program Counter)등
4. 인터럽트 처리 루틴 실행 : 인터럽트를 요청한 장치를 식별한다.
5. 인터럽트 서비스 루틴 실행
  - 인터럽트 원인을 파악하고 실질적인 작업을 수행 한다.
  - 처리기 레지스터 상태를 보존한다.
  - 서비스 루틴 수행 중 우선순위가 더 높은 인터럽트가 발생하면 또 재귀적으로 1-5를 수행한다.
6. 상태복구 : 인터럽트 발생 시 저장해돈 PC(Program Counter)를 다시 복구한다.
7. 중단된 프로그램 실행 재개 : PC의 값을 이용하여 이전에 수행중이던 프로그램을 재개한다.


- Direct X(윈도우 XP)
  - User Mode Application 에서 커널의 GDI엔진을 거치지 않고, 다이렉트로 Device Driver에 접근할 수 있게 하는 것
  - 윈도우에서 고성능 게임할때 다운로드 받아서 했었다.
  - 그래픽 엔진 부분에서 I/O 성능을 극단적으로 끌어올릴 수 있다.

![스크린샷 2023-04-17 오전 12 13 26](https://user-images.githubusercontent.com/79154652/232811507-cbc270f7-8b10-4790-9908-5092862f0cd5.png)

- 위에 보이는 빨간색 선을 따라 User Mode Application -> Kenel -> H/W의 디바이스 까지 가면서 매 구간마다 Interrupt 가 생기기 때문에 I/O 성능이 떨어 질 수 밖에 없다.
- 그래서 Direct X 같이 한번에 Device 에 접근하여 Interrupt 를 줄이며 I/O 성능을 올리게 된 것이며 아래 DMA를 통해 Data에 대해 알아보자
